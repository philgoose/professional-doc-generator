<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Admin Master OS v9.0</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        @media print { .no-print { display: none !important; } .print-area { padding: 0 !important; margin: 0 !important; box-shadow: none !important; } }
        body { background-color: #1e1e1e; font-family: 'Malgun Gothic', sans-serif; }
        .style-paper { width: 210mm; min-height: 297mm; background: white; color: black; padding: 25mm 20mm; position: relative; box-sizing: border-box; }
        .doc-header { text-align: center; font-weight: bold; border-bottom: 3px double black; padding-bottom: 10px; margin-bottom: 30px; font-size: 32px; letter-spacing: 5px; }
        .content-body { line-height: 1.8; text-align: justify; min-height: 550px; white-space: pre-wrap; font-size: 16px; }
        #seal-canvas { position: absolute; right: 60px; bottom: 100px; width: 90px; height: 90px; opacity: 0.8; transform: rotate(-5deg); pointer-events: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, createContext, useContext } = React;

        // --- Mock Components for React Architecture ---
        const ThemeContext = createContext();
        const ThemeProvider = ({ children, defaultTheme }) => (
            <ThemeContext.Provider value={{ theme: defaultTheme }}>
                <div className={defaultTheme === 'dark' ? 'dark' : ''}>{children}</div>
            </ThemeContext.Provider>
        );

        const ErrorBoundary = ({ children }) => {
            try { return <>{children}</>; } 
            catch (e) { return <div className="p-10 text-white">시스템 오류가 발생했습니다.</div>; }
        };

        const TooltipProvider = ({ children }) => <div>{children}</div>;
        const Toaster = () => <div className="no-print"></div>;

        // --- Home Component (Admin OS) ---
        const Home = () => {
            const [data, setData] = useState({
                org: '대한혁신연구소', recipient: '', title: '', content: '', signatory: '', stage: 'normal'
            });
            const canvasRef = useRef(null);

            const samples = {
                initial: "1. 추진 배경: 글로벌 시장 변화 대응\n2. 주요 목적: 신규 비즈니스 인프라 구축\n3. 검토 사항: 초기 예산 편성 및 인력 충원안",
                interim: "1. 진행 현황: 1단계 개발 완료 및 테스트 진행 중\n2. 주요 지표: 목표 대비 105% 달성\n3. 향후 계획: 보안 패치 및 사용자 교육",
                final: "1. 사업 결과: 전사 시스템 통합 완료\n2. 기대 효과: 연간 비용 20% 절감 예상\n3. 종합 결론: 본 사업의 성공적 종료 보고",
                urgent: "[긴급 조치]\n시스템 보안 위협 감지에 따른 전 사원 비밀번호 초기화 요망.\n일시: 현재 시각부로 즉시 시행",
                normal: "상기 건과 관련하여 다음과 같이 보고합니다."
            };

            const drawSeal = () => {
                const canvas = canvasRef.current;
                if (!canvas) return;
                const ctx = canvas.getContext('2d');
                const name = data.org || "직인";
                ctx.clearRect(0, 0, 200, 200);
                ctx.strokeStyle = "red"; ctx.lineWidth = 8; ctx.strokeRect(20, 20, 160, 160);
                ctx.fillStyle = "red"; ctx.font = "bold 40px 'Gungsuh', serif"; ctx.textAlign = "center";
                ctx.fillText(name.substring(0,2), 100, 85); ctx.fillText(name.substring(2,4) || "인", 100, 145);
            };

            useEffect(() => { drawSeal(); }, [data.org]);

            const applyTemplate = (e) => {
                const stage = e.target.value;
                setData({ ...data, stage, content: samples[stage] });
            };

            return (
                <div className="flex h-screen overflow-hidden">
                    {/* Sidebar */}
                    <div className="w-[450px] bg-[#111] p-6 overflow-y-auto border-r-2 border-[#c5a059] no-print">
                        <h2 className="text-[#c5a059] text-xl font-bold mb-6 border-b-2 border-[#c5a059] pb-2">ADMIN MASTER OS</h2>
                        
                        <div className="mb-6 space-y-4">
                            <div>
                                <label className="text-xs text-[#c5a059] font-bold block mb-1">보고 단계 선택</label>
                                <select className="w-full p-2 bg-[#1a1a1a] border border-[#444] rounded text-white" 
                                        onChange={applyTemplate} value={data.stage}>
                                    <option value="normal">일반 공문</option>
                                    <option value="initial">최초 보고</option>
                                    <option value="interim">중간 보고</option>
                                    <option value="final">최종 보고</option>
                                    <option value="urgent">긴급 공문</option>
                                </select>
                            </div>
                            
                            <div>
                                <label className="text-xs text-[#c5a059] font-bold block mb-1">기관 및 수신자</label>
                                <input className="w-full p-2 bg-[#1a1a1a] border border-[#444] rounded text-white mb-2" 
                                       placeholder="발신 기관명" value={data.org} onChange={e => setData({...data, org: e.target.value})} />
                                <input className="w-full p-2 bg-[#1a1a1a] border border-[#444] rounded text-white" 
                                       placeholder="수신자 (예: 홍길동 귀하)" onChange={e => setData({...data, recipient: e.target.value})} />
                            </div>

                            <div>
                                <label className="text-xs text-[#c5a059] font-bold block mb-1">본문 내용 (작성 시 미리보기 자동 반영)</label>
                                <input className="w-full p-2 bg-[#1a1a1a] border border-[#444] rounded text-white mb-2" 
                                       placeholder="문서 제목" value={data.title} onChange={e => setData({...data, title: e.target.value})} />
                                <textarea className="w-full p-2 bg-[#1a1a1a] border border-[#444] rounded text-white h-60" 
                                          value={data.content} onChange={e => setData({...data, content: e.target.value})} />
                            </div>

                            <div>
                                <label className="text-xs text-[#c5a059] font-bold block mb-1">발신인 서명</label>
                                <input className="w-full p-2 bg-[#1a1a1a] border border-[#444] rounded text-white" 
                                       placeholder="직함 및 성명" onChange={e => setData({...data, signatory: e.target.value})} />
                            </div>
                        </div>

                        <button className="w-full bg-[#c5a059] text-black font-bold py-3 rounded-lg hover:bg-yellow-600 transition"
                                onClick={() => window.print()}>
                            공문서 PDF 저장 / 인쇄
                        </button>
                    </div>

                    {/* Preview Area */}
                    <div className="flex-1 bg-[#333] p-10 overflow-y-auto flex justify-center print-area">
                        <div className="style-paper shadow-2xl">
                            <div className="doc-header">{data.org}</div>
                            <div className="mb-8 text-lg">
                                <p><b>수 신 :</b> {data.recipient}</p>
                                <p><b>제 목 :</b> <span className="font-bold">{data.stage !== 'normal' ? `[${data.stage.toUpperCase()}] ` : ''}{data.title}</span></p>
                            </div>
                            <div className="content-body">{data.content}</div>
                            
                            {/* 자동 생성 직인 */}
                            <canvas ref={canvasRef} width="200" height="200" id="seal-canvas"></canvas>
                            
                            <div className="text-center text-2xl font-bold border-t-2 border-black pt-4 mt-20">
                                {data.signatory || '발신인 명의'}
                            </div>
                            <div className="mt-10 text-xs text-gray-500 flex justify-between border-t pt-2">
                                <span>발행 일자: {new Date().toLocaleDateString()}</span>
                                <span>문서번호: 2026-HQ-{Math.floor(Math.random()*9000)+1000}</span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- App Integration ---
        function App() {
            return (
                <ErrorBoundary>
                    <ThemeProvider defaultTheme="dark">
                        <TooltipProvider>
                            <Toaster />
                            <Home />
                        </TooltipProvider>
                    </ThemeProvider>
                </ErrorBoundary>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
